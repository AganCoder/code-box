<!DOCTYPE html>
<html>

<head>
    <title>
        编写你的留言板
    </title>
    <link rel="stylesheet" type="text/css" href="index2.css">

    <script type="text/javascript">	
        function submit() {
            var oText = document.getElementById("title")
            var oEidtor = document.getElementById("editor")

            var title = oText.value

            var content = oEidtor.value

            if (title.length == 0) {
                alert("标题为空");
                return
            } else if (content.length == 0) {
                alert("内容为空");
                return
            }

            var data = {}
            data.title = title;
            data.content = content;

            var json = JSON.stringify(data);


            var xmlhttp = null;
            if (window.XMLHttpRequest) {
                // 主流浏览器
                xmlhttp = new XMLHttpRequest()             
            } else {
                // IE5、IE6                
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP")
            }
            
            xmlhttp.open("GET", "http://localhost:2018/submit", true)   
            xmlHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xmlHttp.onreadystatechange = function (e) {
                if (this.readyState == 4 && this.status == 200) {
                    alert("success")
                }
            }            
            xmlhttp.send(data)
        }
    </script>

</head>

<body>

    <form action="/submit" method="POST">
        <p>First name:
            <input type="text" name="fname" />
        </p>
        <p>Last name:
            <input type="text" name="lname" />
        </p>
        <input type="submit" value="Submit" />
    </form>
</body>

</html>